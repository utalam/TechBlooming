<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Alphabet Fun Game</title>
    <style>
        body {
            font-family: Arial, sans-serif; /* Web-safe font */
            text-align: center;
            padding: 10px; /* Reduced padding for mobile */
            background-color: #4B0082; /* Deep purple background like the image */
            margin: 0;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }
        header {
            background-color: #FF69B4; /* Hot pink header */
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 10px; /* Reduced margin for mobile */
        }
        h1 {
            color: white;
            font-size: 24px; /* Smaller title for mobile */
            margin: 0;
        }
        #how-to-play {
            color: #ffffff; /* White text for "How to Play" to match the purple background */
            font-size: 16px; /* Smaller font for mobile */
            margin: 10px 0;
            line-height: 1.4; /* Tighter line height for mobile */
            padding: 0 10px; /* Add padding for readability on small screens */
        }
        #game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 100%;
            margin: 10px auto; /* Reduced margin for mobile */
            gap: 5px; /* Tighter gap for mobile */
            touch-action: manipulation; /* Improve touch handling */
        }
        .card {
            width: 60px; /* Default smaller size for mobile */
            height: 80px; /* Default smaller size for mobile */
            border: 3px solid #FF4500; /* Slightly smaller border for mobile */
            border-radius: 10px; /* Smaller radius for mobile */
            margin: 3px; /* Reduced margin for mobile */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px; /* Slightly smaller font for mobile default */
            font-weight: 900; /* Extra bold */
            cursor: move;
            user-select: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Reduced shadow for mobile */
            transition: transform 0.2s; /* Smooth hover/touch effect */
            touch-action: none; /* Disable default touch actions for drag */
        }
        .card:hover, .card:active {
            transform: scale(1.1); /* Scale on hover or touch */
        }
        #buttons {
            margin: 15px 0;
        }
        button {
            padding: 12px 25px; /* Smaller padding for mobile */
            font-size: 18px; /* Smaller font for mobile */
            background-color: #32CD32; /* Lime green buttons */
            color: white;
            border: none;
            border-radius: 15px; /* Smaller radius for mobile */
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Reduced shadow for mobile */
            margin: 0 5px; /* Tighter margin for mobile */
            min-width: 120px; /* Ensure buttons are touch-friendly */
            -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
        }
        button:hover, button:active {
            background-color: #00FF7F; /* Brighter green on hover or tap */
        }
        button:disabled {
            background-color: #CCCCCC;
            cursor: not-allowed;
        }
        #timer {
            font-size: 20px; /* Smaller font for mobile */
            color: #FF4500; /* Orange text for visibility */
            margin: 10px; /* Reduced margin for mobile */
            font-weight: bold;
        }
        #message {
            font-size: 18px; /* Smaller font for mobile */
            color: #FF1493; /* Deep pink for fun */
            margin-top: 10px; /* Reduced margin for mobile */
        }
        #score {
            font-size: 16px; /* Smaller font for mobile */
            color: #ffd900; /* Gold for score */
            margin-top: 10px; /* Reduced margin for mobile */
        }
        #game-description {
            color: #ffffff; /* White text for description to match the purple background */
            font-size: 14px; /* Smaller font for mobile */
            margin: 15px auto;
            max-width: 90%; /* Full width on mobile */
            line-height: 1.4; /* Tighter line height for mobile */
            padding: 0 10px; /* Add padding for readability on small screens */
        }
        #social-buttons {
            margin: 15px 0;
        }
        .social-button {
            padding: 8px 15px; /* Smaller padding for mobile */
            font-size: 14px; /* Smaller font for mobile */
            background-color: #32CD32; /* Lime green buttons */
            color: white;
            border: none;
            border-radius: 15px; /* Smaller radius for mobile */
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Reduced shadow for mobile */
            margin: 0 5px; /* Tighter margin for mobile */
            min-width: 100px; /* Ensure buttons are touch-friendly */
            -webkit-tap-highlight-color: transparent; /* Remove tap highlight on mobile */
        }
        .social-button:hover, .social-button:active {
            background-color: #00FF7F; /* Brighter green on hover or tap */
        }
        #like-count {
            font-size: 14px; /* Smaller font for mobile */
            color: #ffd900; /* Gold for like count */
            margin-top: 10px; /* Reduced margin for mobile */
        }

        /* Desktop-specific styles (min-width: 769px) */
        @media (min-width: 769px) {
            body {
                padding: 20px;
            }
            header {
                margin-bottom: 20px;
            }
            h1 {
                font-size: 28px;
            }
            #how-to-play {
                font-size: 18px;
                line-height: 1.5;
                padding: 0;
            }
            #game-container {
                margin: 20px auto;
                gap: 10px;
            }
            .card {
                width: 80px;
                height: 100px;
                border: 4px solid #FF4500;
                border-radius: 15px;
                margin: 5px;
                font-size: 40px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }
            #buttons {
                margin: 20px 0;
            }
            button {
                padding: 15px 30px;
                font-size: 20px;
                border-radius: 20px;
                margin: 0 10px;
                min-width: 150px;
            }
            #timer {
                font-size: 24px;
                margin: 15px;
            }
            #message {
                font-size: 22px;
                margin-top: 15px;
            }
            #score {
                font-size: 20px;
                margin-top: 15px;
            }
            #game-description {
                font-size: 16px;
                max-width: 800px;
                line-height: 1.5;
                margin: 20px auto;
                padding: 0;
            }
            #social-buttons {
                margin: 20px 0;
            }
            .social-button {
                padding: 10px 20px;
                font-size: 16px;
                border-radius: 20px;
                margin: 0 10px;
                min-width: 120px;
            }
            #like-count {
                font-size: 16px;
                margin-top: 15px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Alphabet Fun Game</h1>
    </header>
    <div id="how-to-play">
        <strong>How to Play:</strong><br>
        1. Click "Shuffle & Start" to mix up the alphabet cards!<br>
        2. Drag the colorful letters to put them in the correct order (A to Z).<br>
        3. You have 2 minutesâ€”hurry up and have fun!<br>
        4. Click "Submit" to check your score and grade.<br>
        5. If you need help, click "Answer" to see the right order.<br>
        6. Play again by clicking "Shuffle & Start"!
    </div>
    <div id="buttons">
        <button id="shuffle-btn" onclick="startGame()">Shuffle & Start</button>
        <button id="submit-btn" onclick="submitScore()" disabled>Submit</button>
        <button id="answer-btn" onclick="showAnswer()" disabled>Answer</button>
    </div>
    <div id="timer">Time: 120s</div>
    <div id="game-container"></div>
    <div id="game-description">
        This fun game helps train learners to remember the order of the English alphabet (A to Z) in an interesting and colorful way!
    </div>
    <div id="social-buttons">
        <button class="social-button" onclick="likeGame()">Like</button>
        <button class="social-button" onclick="copyShareLink()">Copy Sharing Link</button>
        <div id="like-count">Likes: 0</div>
    </div>
    <div id="message"></div>
    <div id="score"></div>

    <script>
        const container = document.getElementById("game-container");
        const timerDisplay = document.getElementById("timer");
        const messageDisplay = document.getElementById("message");
        const scoreDisplay = document.getElementById("score");
        const shuffleBtn = document.getElementById("shuffle-btn");
        const submitBtn = document.getElementById("submit-btn");
        const answerBtn = document.getElementById("answer-btn");
        const likeCountDisplay = document.getElementById("like-count");
        let cards = [];
        let timeLeft = 120; // 2 minutes
        let timer;
        let gameActive = false;
        let likeCount = localStorage.getItem('likeCount') ? parseInt(localStorage.getItem('likeCount')) : 0;

        // Update like count display
        function updateLikeCount() {
            likeCountDisplay.textContent = `Likes: ${likeCount}`;
            localStorage.setItem('likeCount', likeCount);
        }
        updateLikeCount();

        // Define vivid and vibrant colors for each card background (matching the image palette: purple, yellow, red, orange, blue)
        const cardBackgroundColors = [
            '#FF007F', // Deep Pink
            '#008000', // Bright Green
            '#FF0000', // Bright Red
            '#FFA500', // Bright Orange
            '#0000FF'  // Bright Blue
        ];

        // Assign colors cyclically to 26 cards
        function getCardBackgroundColor(index) {
            return cardBackgroundColors[index % cardBackgroundColors.length];
        }

        // Create 26 alphabet cards
        function initCards() {
            const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            cards = alphabet.split("").map((letter, index) => ({ letter, order: alphabet.indexOf(letter), bgColor: getCardBackgroundColor(index) }));
            renderCards();
        }

        // Display cards in the container
        function renderCards() {
            container.innerHTML = "";
            cards.forEach(card => {
                const div = document.createElement("div");
                div.className = "card";
                div.textContent = card.letter;
                div.style.backgroundColor = card.bgColor; // Apply unique background color to each card
                div.style.color = '#FFFFFF'; // White text for alphabet letters
                div.draggable = true;
                div.addEventListener("dragstart", dragStart);
                div.addEventListener("dragover", dragOver);
                div.addEventListener("drop", drop);
                div.addEventListener("touchstart", handleTouchStart); // Add touch start for mobile
                div.addEventListener("touchmove", handleTouchMove); // Add touch move for mobile
                div.addEventListener("touchend", handleTouchEnd); // Add touch end for mobile
                container.appendChild(div);
            });
        }

        // Drag-and-drop functions for desktop
        let draggedCard = null;
        function dragStart(e) {
            draggedCard = e.target;
            setTimeout(() => draggedCard.style.opacity = "0.5", 0);
            e.dataTransfer.setData("text/plain", draggedCard.textContent); // For desktop drag
        }
        function dragOver(e) {
            e.preventDefault();
        }
        function drop(e) {
            e.preventDefault();
            const target = e.target;
            if (target.className === "card" && draggedCard !== target) {
                const draggedIdx = Array.from(container.children).indexOf(draggedCard);
                const targetIdx = Array.from(container.children).indexOf(target);
                [cards[draggedIdx], cards[targetIdx]] = [cards[targetIdx], cards[draggedIdx]];
                draggedCard.style.opacity = "1";
                renderCards();
                checkWin();
            }
        }

        // Touch event handlers for mobile
        let touchStartX = 0;
        let touchStartY = 0;
        let touchedCard = null;

        function handleTouchStart(e) {
            if (e.touches.length === 1) {
                const touch = e.touches[0];
                touchedCard = e.target;
                touchStartX = touch.clientX;
                touchStartY = touch.clientY;
                touchedCard.style.opacity = "0.5";
                e.preventDefault(); // Prevent default touch behavior
            }
        }

        function handleTouchMove(e) {
            if (touchedCard && e.touches.length === 1) {
                const touch = e.touches[0];
                const deltaX = touch.clientX - touchStartX;
                const deltaY = touch.clientY - touchStartY;
                touchedCard.style.position = "relative";
                touchedCard.style.left = `${deltaX}px`;
                touchedCard.style.top = `${deltaY}px`;
                e.preventDefault(); // Prevent scrolling
            }
        }

        function handleTouchEnd(e) {
            if (touchedCard) {
                touchedCard.style.opacity = "1";
                touchedCard.style.position = "";
                touchedCard.style.left = "";
                touchedCard.style.top = "";
                const touch = e.changedTouches[0];
                const endX = touch.clientX;
                const endY = touch.clientY;
                const cardsArray = Array.from(container.children);
                let closestCard = null;
                let minDistance = Infinity;

                cardsArray.forEach(card => {
                    if (card !== touchedCard) {
                        const rect = card.getBoundingClientRect();
                        const centerX = rect.left + rect.width / 2;
                        const centerY = rect.top + rect.height / 2;
                        const distance = Math.sqrt((centerX - endX) ** 2 + (centerY - endY) ** 2);
                        if (distance < minDistance) {
                            minDistance = distance;
                            closestCard = card;
                        }
                    }
                });

                if (closestCard && minDistance < 60) { // Threshold for swapping (adjust as needed)
                    const draggedIdx = cardsArray.indexOf(touchedCard);
                    const targetIdx = cardsArray.indexOf(closestCard);
                    [cards[draggedIdx], cards[targetIdx]] = [cards[targetIdx], cards[draggedIdx]];
                    renderCards();
                    checkWin();
                }
                touchedCard = null;
                e.preventDefault(); // Prevent default touch behavior
            }
        }

        // Timer logic
        function startTimer() {
            clearInterval(timer);
            timeLeft = 120;
            timerDisplay.textContent = `Time: ${timeLeft}s`;
            timer = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = `Time: ${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    endGame("Time's up! Try again.");
                }
            }, 1000);
        }

        // Start game
        function startGame() {
            shuffleCards();
            startTimer();
            messageDisplay.textContent = "";
            scoreDisplay.textContent = "";
            submitBtn.disabled = false;
            answerBtn.disabled = false;
            shuffleBtn.disabled = true;
            gameActive = true;
        }

        // Check if cards are in order
        function checkWin() {
            const currentOrder = cards.map(card => card.letter).join("");
            if (currentOrder === "ABCDEFGHIJKLMNOPQRSTUVWXYZ") {
                clearInterval(timer);
                congratulatePlayer();
                endGame("Congratulations! Happy playing!");
            }
        }

        // Submit score and calculate grade
        function submitScore() {
            if (!gameActive) return;
            clearInterval(timer);
            const currentOrder = cards.map(card => card.letter).join("");
            let correctCount = 0;
            for (let i = 0; i < currentOrder.length; i++) {
                if (currentOrder[i] === "ABCDEFGHIJKLMNOPQRSTUVWXYZ"[i]) {
                    correctCount++;
                }
            }
            const score = Math.round((correctCount / 26) * 100); // Score out of 100
            let grade = "";
            if (score >= 90) grade = "Excellent";
            else if (score >= 70) grade = "Good";
            else if (score >= 50) grade = "Fair";
            else if (score >= 30) grade = "Need Improvement";
            else grade = "Poor";

            scoreDisplay.textContent = `Your Score: ${score}/100 - Grade: ${grade}`;
            messageDisplay.textContent = score === 100 ? "Congratulations! Happy playing!" : "";
            submitBtn.disabled = true;
            answerBtn.disabled = false;
            shuffleBtn.disabled = false;
            gameActive = false;
        }

        // Show correct answer (A-Z order)
        function showAnswer() {
            if (!gameActive) {
                cards.sort((a, b) => a.order - b.order);
                renderCards();
                messageDisplay.textContent = "Here is the answer of today's game. Press the 'Shuffle' button and play again!";
                scoreDisplay.textContent = "";
                submitBtn.disabled = true;
                answerBtn.disabled = true;
                shuffleBtn.disabled = false;
            }
        }

        // End game and reset buttons
        function endGame(message) {
            messageDisplay.textContent = message;
            submitBtn.disabled = true;
            answerBtn.disabled = false;
            shuffleBtn.disabled = false;
            gameActive = false;
        }

        // Congratulate player for perfect score
        function congratulatePlayer() {
            scoreDisplay.textContent = `Your Score: 100/100 - Grade: Excellent`;
        }

        // Like button functionality
        function likeGame() {
            likeCount++;
            updateLikeCount();
            alert("Thanks for liking the game!");
        }

        // Copy sharing link functionality
        function copyShareLink() {
            const currentUrl = window.location.href;
            navigator.clipboard.writeText(currentUrl).then(() => {
                alert("Link copied to clipboard! Share with friends!");
            }).catch(err => {
                alert("Failed to copy link. Please try again.");
                console.error("Error copying link:", err);
            });
        }

        // Shuffle array (Fisher-Yates)
        function shuffleCards() {
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cards[i], cards[j]] = [cards[j], cards[i]];
            }
            renderCards();
        }

        // Initialize game on load
        initCards();
    </script>
    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'91a776d1aaa61d76',t:'MTc0MDk4NzQwMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>
